(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4611:(e,a,t)=>{Promise.resolve().then(t.bind(t,3137))},3137:(e,a,t)=>{"use strict";t.d(a,{default:()=>al});var s=t(5155),r=t(2115),n=t(1169),l=t(1536),i=t(5325),d=t(8369);let o=d.bL,c=d.R6,u=d.Ke;var m=t(2317),h=t(1027),x=t(8535),p=t(1567),f=t(3312),g=t(3900),j=t(434);let b=r.forwardRef((e,a)=>{let{className:t,orientation:r="horizontal",decorative:n=!0,...l}=e;return(0,s.jsx)(j.b,{ref:a,decorative:n,orientation:r,className:(0,p.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...l})});b.displayName=j.b.displayName;var y=t(6217),v=t(689);let N=y.bL;y.l9,y.bm;let w=y.ZL,k=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(y.hJ,{className:(0,p.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:a})});k.displayName=y.hJ.displayName;let S=(0,h.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),C=r.forwardRef((e,a)=>{let{side:t="right",className:r,children:n,...l}=e;return(0,s.jsxs)(w,{children:[(0,s.jsx)(k,{}),(0,s.jsxs)(y.UC,{ref:a,className:(0,p.cn)(S({side:t}),r),...l,children:[(0,s.jsxs)(y.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]}),n]})]})});function _(e){let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,p.cn)("animate-pulse rounded-md bg-primary/10",a),...t})}C.displayName=y.UC.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(y.hE,{ref:a,className:(0,p.cn)("text-lg font-semibold text-foreground",t),...r})}).displayName=y.hE.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(y.VY,{ref:a,className:(0,p.cn)("text-sm text-muted-foreground",t),...r})}).displayName=y.VY.displayName;var R=t(9710);let P=R.Kq,I=R.bL,T=R.l9,D=r.forwardRef((e,a)=>{let{className:t,sideOffset:r=4,...n}=e;return(0,s.jsx)(R.ZL,{children:(0,s.jsx)(R.UC,{ref:a,sideOffset:r,className:(0,p.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});D.displayName=R.UC.displayName;let E=r.createContext(null);function z(){let e=r.useContext(E);if(!e)throw Error("useSidebar must be used within a SidebarProvider.");return e}let M=r.forwardRef((e,a)=>{let{defaultOpen:t=!0,open:n,onOpenChange:l,className:i,style:d,children:o,...c}=e,u=function(){let[e,a]=r.useState(void 0);return r.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),t=()=>{a(window.innerWidth<768)};return e.addEventListener("change",t),a(window.innerWidth<768),()=>e.removeEventListener("change",t)},[]),!!e}(),[m,h]=r.useState(!1),[x,f]=r.useState(t),g=null!=n?n:x,j=r.useCallback(e=>{let a="function"==typeof e?e(g):e;l?l(a):f(a),document.cookie="".concat("sidebar:state","=").concat(a,"; path=/; max-age=").concat(604800)},[l,g]),b=r.useCallback(()=>u?h(e=>!e):j(e=>!e),[u,j,h]);r.useEffect(()=>{let e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),b())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[b]);let y=g?"expanded":"collapsed",v=r.useMemo(()=>({state:y,open:g,setOpen:j,isMobile:u,openMobile:m,setOpenMobile:h,toggleSidebar:b}),[y,g,j,u,m,h,b]);return(0,s.jsx)(E.Provider,{value:v,children:(0,s.jsx)(P,{delayDuration:0,children:(0,s.jsx)("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...d},className:(0,p.cn)("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",i),ref:a,...c,children:o})})})});M.displayName="SidebarProvider";let K=r.forwardRef((e,a)=>{let{side:t="left",variant:r="sidebar",collapsible:n="offcanvas",className:l,children:i,...d}=e,{isMobile:o,state:c,openMobile:u,setOpenMobile:m}=z();return"none"===n?(0,s.jsx)("div",{className:(0,p.cn)("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",l),ref:a,...d,children:i}):o?(0,s.jsx)(N,{open:u,onOpenChange:m,...d,children:(0,s.jsx)(C,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:t,children:(0,s.jsx)("div",{className:"flex h-full w-full flex-col",children:i})})}):(0,s.jsxs)("div",{ref:a,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":"collapsed"===c?n:"","data-variant":r,"data-side":t,children:[(0,s.jsx)("div",{className:(0,p.cn)("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===r||"inset"===r?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),(0,s.jsx)("div",{className:(0,p.cn)("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex","left"===t?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===r||"inset"===r?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",l),...d,children:(0,s.jsx)("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});K.displayName="Sidebar";let L=r.forwardRef((e,a)=>{let{className:t,onClick:r,...n}=e,{toggleSidebar:l}=z();return(0,s.jsxs)(f.$,{ref:a,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:(0,p.cn)("h-7 w-7",t),onClick:e=>{null==r||r(e),l()},...n,children:[(0,s.jsx)(x.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})});L.displayName="SidebarTrigger";let A=r.forwardRef((e,a)=>{let{className:t,...r}=e,{toggleSidebar:n}=z();return(0,s.jsx)("button",{ref:a,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:(0,p.cn)("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...r})});A.displayName="SidebarRail";let B=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("main",{ref:a,className:(0,p.cn)("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...r})});B.displayName="SidebarInset",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(g.p,{ref:a,"data-sidebar":"input",className:(0,p.cn)("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...r})}).displayName="SidebarInput";let O=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,"data-sidebar":"header",className:(0,p.cn)("flex flex-col gap-2 p-2",t),...r})});O.displayName="SidebarHeader";let V=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,"data-sidebar":"footer",className:(0,p.cn)("flex flex-col gap-2 p-2",t),...r})});V.displayName="SidebarFooter",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(b,{ref:a,"data-sidebar":"separator",className:(0,p.cn)("mx-2 w-auto bg-sidebar-border",t),...r})}).displayName="SidebarSeparator";let q=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,"data-sidebar":"content",className:(0,p.cn)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...r})});q.displayName="SidebarContent";let H=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,"data-sidebar":"group",className:(0,p.cn)("relative flex w-full min-w-0 flex-col p-2",t),...r})});H.displayName="SidebarGroup";let F=r.forwardRef((e,a)=>{let{className:t,asChild:r=!1,...n}=e,l=r?m.DX:"div";return(0,s.jsx)(l,{ref:a,"data-sidebar":"group-label",className:(0,p.cn)("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});F.displayName="SidebarGroupLabel",r.forwardRef((e,a)=>{let{className:t,asChild:r=!1,...n}=e,l=r?m.DX:"button";return(0,s.jsx)(l,{ref:a,"data-sidebar":"group-action",className:(0,p.cn)("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})}).displayName="SidebarGroupAction",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,"data-sidebar":"group-content",className:(0,p.cn)("w-full text-sm",t),...r})}).displayName="SidebarGroupContent";let $=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("ul",{ref:a,"data-sidebar":"menu",className:(0,p.cn)("flex w-full min-w-0 flex-col gap-1",t),...r})});$.displayName="SidebarMenu";let G=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("li",{ref:a,"data-sidebar":"menu-item",className:(0,p.cn)("group/menu-item relative",t),...r})});G.displayName="SidebarMenuItem";let U=(0,h.F)("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),J=r.forwardRef((e,a)=>{let{asChild:t=!1,isActive:r=!1,variant:n="default",size:l="default",tooltip:i,className:d,...o}=e,c=t?m.DX:"button",{isMobile:u,state:h}=z(),x=(0,s.jsx)(c,{ref:a,"data-sidebar":"menu-button","data-size":l,"data-active":r,className:(0,p.cn)(U({variant:n,size:l}),d),...o});return i?("string"==typeof i&&(i={children:i}),(0,s.jsxs)(I,{children:[(0,s.jsx)(T,{asChild:!0,children:x}),(0,s.jsx)(D,{side:"right",align:"center",hidden:"collapsed"!==h||u,...i})]})):x});J.displayName="SidebarMenuButton",r.forwardRef((e,a)=>{let{className:t,asChild:r=!1,showOnHover:n=!1,...l}=e,i=r?m.DX:"button";return(0,s.jsx)(i,{ref:a,"data-sidebar":"menu-action",className:(0,p.cn)("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...l})}).displayName="SidebarMenuAction",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,"data-sidebar":"menu-badge",className:(0,p.cn)("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...r})}).displayName="SidebarMenuBadge",r.forwardRef((e,a)=>{let{className:t,showIcon:n=!1,...l}=e,i=r.useMemo(()=>"".concat(Math.floor(40*Math.random())+50,"%"),[]);return(0,s.jsxs)("div",{ref:a,"data-sidebar":"menu-skeleton",className:(0,p.cn)("flex h-8 items-center gap-2 rounded-md px-2",t),...l,children:[n&&(0,s.jsx)(_,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),(0,s.jsx)(_,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})}).displayName="SidebarMenuSkeleton";let Z=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("ul",{ref:a,"data-sidebar":"menu-sub",className:(0,p.cn)("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...r})});Z.displayName="SidebarMenuSub";let Q=r.forwardRef((e,a)=>{let{...t}=e;return(0,s.jsx)("li",{ref:a,...t})});Q.displayName="SidebarMenuSubItem";let W=r.forwardRef((e,a)=>{let{asChild:t=!1,size:r="md",isActive:n,className:l,...i}=e,d=t?m.DX:"a";return(0,s.jsx)(d,{ref:a,"data-sidebar":"menu-sub-button","data-size":r,"data-active":n,className:(0,p.cn)("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===r&&"text-xs","md"===r&&"text-sm","group-data-[collapsible=icon]:hidden",l),...i})});function X(e){let{items:a,onSubmenuChange:t}=e,[n,l]=(0,r.useState)({}),d=e=>{l(a=>({...a,[e]:!a[e]}))};return(0,s.jsxs)(H,{children:[(0,s.jsx)(F,{children:"Aksi"}),(0,s.jsx)($,{children:a.map(e=>(0,s.jsx)(o,{asChild:!0,defaultOpen:n[e.title]||e.isActive,className:"group/collapsible",children:(0,s.jsxs)(G,{children:[(0,s.jsx)(c,{asChild:!0,children:(0,s.jsxs)(J,{tooltip:e.title,onClick:()=>d(e.title),children:[e.icon&&(0,s.jsx)(e.icon,{}),(0,s.jsx)("span",{children:e.title}),(0,s.jsx)(i.A,{className:"ml-auto transition-transform duration-200 ".concat(n[e.title]?"rotate-90":"")})]})}),e.items&&(0,s.jsx)(u,{children:(0,s.jsx)(Z,{children:e.items.map(e=>(0,s.jsx)(Q,{children:(0,s.jsx)(W,{asChild:!0,children:(0,s.jsx)("a",{href:e.url,onClick:a=>{a.preventDefault(),t(e.title)},children:(0,s.jsx)("span",{children:e.title})})})},e.title))})})]})},e.title))})]})}W.displayName="SidebarMenuSubButton";var Y=t(6046),ee=t(8346),ea=t(1354),et=t(4920);let es=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(et.bL,{ref:a,className:(0,p.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});es.displayName=et.bL.displayName;let er=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(et._V,{ref:a,className:(0,p.cn)("aspect-square h-full w-full",t),...r})});er.displayName=et._V.displayName;let en=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(et.H4,{ref:a,className:(0,p.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});en.displayName=et.H4.displayName;var el=t(4471),ei=t(7193),ed=t(1703);let eo=el.bL,ec=el.l9;el.YJ,el.ZL,el.Pb,el.z6,r.forwardRef((e,a)=>{let{className:t,inset:r,children:n,...l}=e;return(0,s.jsxs)(el.ZP,{ref:a,className:(0,p.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...l,children:[n,(0,s.jsx)(i.A,{className:"ml-auto"})]})}).displayName=el.ZP.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(el.G5,{ref:a,className:(0,p.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}).displayName=el.G5.displayName;let eu=r.forwardRef((e,a)=>{let{className:t,sideOffset:r=4,...n}=e;return(0,s.jsx)(el.ZL,{children:(0,s.jsx)(el.UC,{ref:a,sideOffset:r,className:(0,p.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});eu.displayName=el.UC.displayName;let em=r.forwardRef((e,a)=>{let{className:t,inset:r,...n}=e;return(0,s.jsx)(el.q7,{ref:a,className:(0,p.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",r&&"pl-8",t),...n})});em.displayName=el.q7.displayName;let eh=r.forwardRef((e,a)=>{let{className:t,children:r,checked:n,...l}=e;return(0,s.jsxs)(el.H_,{ref:a,className:(0,p.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(el.VF,{children:(0,s.jsx)(ei.A,{className:"h-4 w-4"})})}),r]})});eh.displayName=el.H_.displayName,r.forwardRef((e,a)=>{let{className:t,children:r,...n}=e;return(0,s.jsxs)(el.hN,{ref:a,className:(0,p.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(el.VF,{children:(0,s.jsx)(ed.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=el.hN.displayName;let ex=r.forwardRef((e,a)=>{let{className:t,inset:r,...n}=e;return(0,s.jsx)(el.JU,{ref:a,className:(0,p.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...n})});ex.displayName=el.JU.displayName;let ep=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(el.wv,{ref:a,className:(0,p.cn)("-mx-1 my-1 h-px bg-muted",t),...r})});function ef(e){let{user:a}=e,{isMobile:t}=z(),r=(0,Y.useRouter)();return(0,s.jsx)($,{children:(0,s.jsx)(G,{children:(0,s.jsxs)(eo,{children:[(0,s.jsx)(ec,{asChild:!0,children:(0,s.jsxs)(J,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[(0,s.jsxs)(es,{className:"h-8 w-8 rounded-lg",children:[(0,s.jsx)(er,{src:a.avatar,alt:a.name}),(0,s.jsx)(en,{className:"rounded-lg",children:"CN"})]}),(0,s.jsxs)("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[(0,s.jsx)("span",{className:"truncate font-semibold",children:a.name}),(0,s.jsx)("span",{className:"truncate text-xs",children:a.email})]}),(0,s.jsx)(ee.A,{className:"ml-auto size-4"})]})}),(0,s.jsxs)(eu,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:t?"bottom":"right",align:"end",sideOffset:4,children:[(0,s.jsx)(ex,{className:"p-0 font-normal",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 px-1 py-1.5 text-left text-sm",children:[(0,s.jsxs)(es,{className:"h-8 w-8 rounded-lg",children:[(0,s.jsx)(er,{src:a.avatar,alt:a.name}),(0,s.jsx)(en,{className:"rounded-lg",children:"CN"})]}),(0,s.jsxs)("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[(0,s.jsx)("span",{className:"truncate font-semibold",children:a.name}),(0,s.jsx)("span",{className:"truncate text-xs",children:a.email})]})]})}),(0,s.jsx)(ep,{}),(0,s.jsxs)(em,{onClick:()=>{localStorage.removeItem("authToken"),sessionStorage.clear(),r.push("/")},children:[(0,s.jsx)(ea.A,{}),"Log out"]})]})]})})})}ep.displayName=el.wv.displayName;let eg={user:{name:"user",email:"m@example.com",avatar:"/avatars/shadcn.jpg"},navMain:[{title:"Penjualan",url:"#",icon:n.cXm,isActive:!1,items:[{title:"Penjualan Toko",url:"#"},{title:"Penjualan TikTok",url:"#"},{title:"Penjualan Gudang",url:"#"}]},{title:"History",url:"#",icon:n.DdO,items:[{title:"Telusuri Item lewat ID",url:"#"},{title:"History Transaksi",url:"#"}]},{title:"Pindahan Inventory",url:"#",icon:n.gU$,items:[{title:"Pindahan",url:"#"},{title:"Retur Barang",url:"#"},{title:"Terima Barang",url:"#"}]},{title:"Laporan",url:"#",icon:l.hko,items:[{title:"Penjualan Harian",url:"#"},{title:"Penjualan Bulanan",url:"#"},{title:"Pindahan Harian",url:"#"},{title:"Pindahan Bulanan",url:"#"}]}]};function ej(e){let{onSubmenuChange:a}=e;return(0,s.jsxs)(K,{collapsible:"icon",children:[(0,s.jsxs)(O,{className:"flex flex-col items-center py-4 border-b border-gray-200 cursor-pointer hover:bg-gray-100 transition-all",onClick:()=>a("Dashboard"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Tvt,{className:"text-2xl text-gray-900"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 tracking-wide",children:"TOKO OLIVIA"})]}),(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Inventory Management"})]}),(0,s.jsx)(q,{children:(0,s.jsx)(X,{items:eg.navMain,onSubmenuChange:a})}),(0,s.jsx)(V,{children:(0,s.jsx)(ef,{user:eg.user})}),(0,s.jsx)(A,{})]})}t(368);let eb=r.forwardRef((e,a)=>{let{...t}=e;return(0,s.jsx)("nav",{ref:a,"aria-label":"breadcrumb",...t})});eb.displayName="Breadcrumb";let ey=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("ol",{ref:a,className:(0,p.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",t),...r})});ey.displayName="BreadcrumbList";let ev=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("li",{ref:a,className:(0,p.cn)("inline-flex items-center gap-1.5",t),...r})});ev.displayName="BreadcrumbItem",r.forwardRef((e,a)=>{let{asChild:t,className:r,...n}=e,l=t?m.DX:"a";return(0,s.jsx)(l,{ref:a,className:(0,p.cn)("transition-colors hover:text-foreground",r),...n})}).displayName="BreadcrumbLink";let eN=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("span",{ref:a,role:"link","aria-disabled":"true","aria-current":"page",className:(0,p.cn)("font-normal text-foreground",t),...r})});eN.displayName="BreadcrumbPage";let ew=e=>{let{children:a,className:t,...r}=e;return(0,s.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,p.cn)("[&>svg]:w-3.5 [&>svg]:h-3.5",t),...r,children:null!=a?a:(0,s.jsx)(i.A,{})})};ew.displayName="BreadcrumbSeparator";let ek=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:a,className:(0,p.cn)("w-full caption-bottom text-sm",t),...r})})});ek.displayName="Table";let eS=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("thead",{ref:a,className:(0,p.cn)("[&_tr]:border-b",t),...r})});eS.displayName="TableHeader";let eC=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tbody",{ref:a,className:(0,p.cn)("[&_tr:last-child]:border-0",t),...r})});eC.displayName="TableBody";let e_=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tfoot",{ref:a,className:(0,p.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})});e_.displayName="TableFooter";let eR=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tr",{ref:a,className:(0,p.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});eR.displayName="TableRow";let eP=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("th",{ref:a,className:(0,p.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})});eP.displayName="TableHead";let eI=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("td",{ref:a,className:(0,p.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})});eI.displayName="TableCell",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("caption",{ref:a,className:(0,p.cn)("mt-4 text-sm text-muted-foreground",t),...r})}).displayName="TableCaption";var eT=t(3434),eD=t(2645),eE=t(2488);let ez=eT.bL,eM=eT.YJ,eK=eT.WT,eL=r.forwardRef((e,a)=>{let{className:t,children:r,...n}=e;return(0,s.jsxs)(eT.l9,{ref:a,className:(0,p.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[r,(0,s.jsx)(eT.In,{asChild:!0,children:(0,s.jsx)(eD.A,{className:"h-4 w-4 opacity-50"})})]})});eL.displayName=eT.l9.displayName;let eA=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(eT.PP,{ref:a,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(eE.A,{className:"h-4 w-4"})})});eA.displayName=eT.PP.displayName;let eB=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(eT.wn,{ref:a,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(eD.A,{className:"h-4 w-4"})})});eB.displayName=eT.wn.displayName;let eO=r.forwardRef((e,a)=>{let{className:t,children:r,position:n="popper",...l}=e;return(0,s.jsx)(eT.ZL,{children:(0,s.jsxs)(eT.UC,{ref:a,className:(0,p.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...l,children:[(0,s.jsx)(eA,{}),(0,s.jsx)(eT.LM,{className:(0,p.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(eB,{})]})})});eO.displayName=eT.UC.displayName;let eV=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(eT.JU,{ref:a,className:(0,p.cn)("px-2 py-1.5 text-sm font-semibold",t),...r})});eV.displayName=eT.JU.displayName;let eq=r.forwardRef((e,a)=>{let{className:t,children:r,...n}=e;return(0,s.jsxs)(eT.q7,{ref:a,className:(0,p.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(eT.VF,{children:(0,s.jsx)(ei.A,{className:"h-4 w-4"})})}),(0,s.jsx)(eT.p4,{children:r})]})});eq.displayName=eT.q7.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(eT.wv,{ref:a,className:(0,p.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=eT.wv.displayName;var eH=t(9749);let eF=y.bL,e$=y.l9,eG=y.ZL;y.bm;let eU=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(y.hJ,{ref:a,className:(0,p.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});eU.displayName=y.hJ.displayName;let eJ=r.forwardRef((e,a)=>{let{className:t,children:r,...n}=e;return(0,s.jsxs)(eG,{children:[(0,s.jsx)(eU,{}),(0,s.jsxs)(y.UC,{ref:a,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[r,(0,s.jsxs)(y.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eJ.displayName=y.UC.displayName;let eZ=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};eZ.displayName="DialogHeader";let eQ=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,p.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};eQ.displayName="DialogFooter";let eW=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(y.hE,{ref:a,className:(0,p.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});function eX(e){let{location:a}=e,[t,l]=(0,r.useState)([{invoice:"",hargaSatuan:"Rp.0",jumlah:"1",discountPerItem:"0",total:"Rp.0",description:"",stock:""}]),[i,d]=(0,r.useState)("none"),[o,c]=(0,r.useState)(0),[u,m]=(0,r.useState)(0),[h,x]=(0,r.useState)(null),[p,j]=(0,r.useState)([]),[b,y]=(0,r.useState)([]),[v,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[_,R]=(0,r.useState)(""),[P,I]=(0,r.useState)(""),[T,D]=(0,r.useState)(""),[E,z]=(0,r.useState)(0);(0,r.useEffect)(()=>{M()},[a]);let M=async()=>{try{let e=await fetch("http://localhost:8080/api/inventory/".concat(a));if(!e.ok)throw Error("Failed to fetch inventory");let t=await e.json();j(t.data||[])}catch(e){console.error("Error fetching inventory:",e)}},K=e=>e&&parseFloat(e.replace(/Rp\.|\./g,"").replace(/,/g,""))||0,L=e=>"Rp.".concat(e.toLocaleString("id-ID")),A=(e,a,s)=>{let r=[...t];if(r[e]={...r[e],[a]:s},"jumlah"===a){let a=parseInt(s)||0,t=parseInt(r[e].stock)||0;a>t&&(alert("Jumlah tidak boleh lebih dari stok yang tersedia (".concat(t,").")),r[e].jumlah=t.toString())}if(["hargaSatuan","jumlah","discountPerItem"].includes(a)){let a=K(r[e].hargaSatuan),t=parseInt(r[e].jumlah)||0,s=K(r[e].discountPerItem);r[e].total=L(Math.max(a*t-s*t,0))}l(r)},B=(e,a)=>{l(t=>{let s=[...t];return s[e].invoice=a,y(p.filter(e=>e.item_id.toLowerCase().includes(a.toLowerCase()))),x(e),s})},O=(e,a)=>{l(t=>{let s=[...t];return s[e].invoice=a.item_id,s[e].hargaSatuan=L(a.price),s[e].description=a.description,s[e].stock=a.quantity,y([]),x(null),s})},V=e=>{l(t.filter((a,t)=>t!==e))},q=()=>{let e=t.reduce((e,a)=>{let t=K(a.hargaSatuan),s=isNaN(parseInt(a.jumlah))?0:parseInt(a.jumlah);return e+(t*s-(parseFloat(a.discountPerItem)||0)*s)},0);if("percent"===i&&o>0){let a=e*o/100;e-=a}else"total"==i&&u>0&&(e-=u);let a=e.toFixed(3);return"Rp.".concat(parseFloat(a).toLocaleString("id-ID"))},H=async()=>{k(!1);let e=t.map(e=>{let{invoice:a,hargaSatuan:t,jumlah:s,discountPerItem:r,description:n,total:l}=e;return{item_id:a,price:K(t),quantity:parseInt(s),discount_per_item:K(r),description:n,total:K(l)}}),s=e.reduce((e,a)=>e+a.total,0),r=0;"amount"===i?r=e.reduce((e,a)=>e+a.discount_per_item*a.quantity,0):"percent"===i?r=s*o/100:"total"==i&&(r=u);let n=K(q()),c={sales:e,discount_type:i,discount_percent:o,total_discount:r,payment_id:parseInt(_),payment_status:P,customer_name:T,total_price:n,location:a,down_payment:E};console.log("Payload being sent:",JSON.stringify(c,null,2));try{if(!(await fetch("http://localhost:8080/api/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok)throw Error("Failed to process transaction");alert("Sale successful!"),d("none"),l([{invoice:"",hargaSatuan:"Rp.0",jumlah:"1",discountPerItem:"0",total:"Rp.0",description:"",stock:""}])}catch(e){console.error("Transaction error:",e),alert("Transaction failed!")}};return(0,s.jsx)("div",{className:"flex flex-col justify-center items-center min-h-[85vh] mt-[-40px]",children:(0,s.jsxs)("div",{className:"w-full max-w-5xl",children:[(0,s.jsx)("div",{className:"flex justify-end mb-4",children:(0,s.jsxs)(ez,{onValueChange:e=>{c(0),m(0),l(t.map(e=>({...e,discountPerItem:"0"}))),"percent"===e?d("percent"):"amount"===e?d("amount"):"total"==e?d("total"):d("none")},children:[(0,s.jsx)(eL,{className:"w-[180px]",children:(0,s.jsx)(eK,{placeholder:"Pillihan"})}),(0,s.jsx)(eO,{children:(0,s.jsxs)(eM,{children:[(0,s.jsx)(eV,{children:"Fitur"}),(0,s.jsx)(eq,{value:"percent",children:"Diskon %"}),(0,s.jsx)(eq,{value:"amount",children:"Diskon Per Pc"}),(0,s.jsx)(eq,{value:"total",children:"Diskon Total"}),(0,s.jsx)(eq,{value:"none",children:"Cancel"})]})})]})}),"percent"===i&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"font-medium",children:"Diskon %:"}),(0,s.jsx)(g.p,{type:"number",value:o,onChange:e=>c(parseFloat(e.target.value)||0),className:"ml-2 w-32"})]}),"total"===i&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"font-medium",children:"Diskon Total:"}),(0,s.jsx)(g.p,{type:"number",value:u,onChange:e=>m(parseFloat(e.target.value)||0),className:"ml-2 w-32"})]}),(0,s.jsxs)(ek,{children:[(0,s.jsx)(eS,{children:(0,s.jsxs)(eR,{children:[(0,s.jsx)(eP,{children:"ID Barang"}),(0,s.jsx)(eP,{children:"Harga Satuan"}),(0,s.jsx)(eP,{children:"Jumlah"}),"amount"===i&&(0,s.jsx)(eP,{children:"Diskon per Item"}),(0,s.jsx)(eP,{children:"Deskripsi"}),(0,s.jsx)(eP,{children:"Sisa Stock"}),(0,s.jsx)(eP,{children:"Aksi"})]})}),(0,s.jsx)(eC,{children:t.map((e,a)=>(0,s.jsxs)(eR,{children:[(0,s.jsxs)(eI,{children:[(0,s.jsx)(g.p,{value:e.invoice,onChange:e=>B(a,e.target.value),className:"text-center",placeholder:"Isi ID Barang...",onFocus:()=>x(a),onBlur:()=>setTimeout(()=>x(null),200)}),h===a&&b.length>0&&(0,s.jsx)("div",{className:"absolute bg-white border shadow-md w-full max-h-40 overflow-y-auto z-10",children:b.map(e=>(0,s.jsxs)("div",{className:"p-2 hover:bg-gray-200 cursor-pointer",onClick:()=>O(a,e),children:[e.item_id," - ",e.description," (sisa ",e.quantity,")"]},e.item_id))})]}),(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{value:e.hargaSatuan,readOnly:!0})}),(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{value:e.jumlah,onChange:e=>A(a,"jumlah",e.target.value)})}),"amount"===i&&(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{value:e.discountPerItem,onChange:e=>A(a,"discountPerItem",e.target.value)})}),(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{value:e.description,readOnly:!0})}),(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{value:e.stock,readOnly:!0})}),(0,s.jsx)(eI,{children:(0,s.jsx)(f.$,{variant:"destructive",onClick:()=>V(a),disabled:t.length<=1,children:(0,s.jsx)(n.NIP,{})})})]},a))}),(0,s.jsx)(e_,{children:(0,s.jsxs)(eR,{children:[(0,s.jsx)(eI,{colSpan:3,className:"text-right font-bold",children:"Grand Total"}),(0,s.jsx)(eI,{className:"font-bold",children:q()}),(0,s.jsx)(eI,{children:(0,s.jsx)(f.$,{variant:"outline",size:"icon",onClick:()=>{l([...t,{invoice:"",hargaSatuan:"Rp.0",jumlah:"1",discountPerItem:"0",total:"Rp.0",description:"",stock:"0"}])},children:(0,s.jsx)(n.tNe,{})})})]})})]}),(0,s.jsx)(f.$,{className:"mt-4",onClick:()=>{N(!0)},children:"Proceed to Payment"}),(0,s.jsx)(eF,{open:v,onOpenChange:N,children:(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eW,{children:"Enter Payment Details"}),(0,s.jsx)(g.p,{placeholder:"Customer Name",value:T,onChange:e=>D(e.target.value)}),(0,s.jsx)("label",{className:"block text-sm font-medium mt-2",children:"Payment Method"}),(0,s.jsxs)(ez,{onValueChange:R,children:[(0,s.jsx)(eL,{className:"w-full mt-1",children:(0,s.jsx)(eK,{placeholder:"Pillih Metode Pembayaran"})}),(0,s.jsx)(eO,{children:(0,s.jsxs)(eM,{children:[(0,s.jsx)(eV,{children:"Metode Pembayaran"}),(0,s.jsx)(eq,{value:"1",children:"Tunai"}),(0,s.jsx)(eq,{value:"2",children:"Debit"}),(0,s.jsx)(eq,{value:"3",children:"Transfer"}),(0,s.jsx)(eq,{value:"4",children:"Cek / GIRO"}),(0,s.jsx)(eq,{value:"5",children:"QR"}),(0,s.jsx)(eq,{value:"6",children:"Hutang"}),(0,s.jsx)(eq,{value:"7",children:"DP"})]})})]}),(0,s.jsx)("label",{className:"block text-sm font-medium mt-2",children:"Status Pembayaran"}),(0,s.jsxs)(ez,{onValueChange:I,children:[(0,s.jsx)(eL,{className:"w-full mt-1",children:(0,s.jsx)(eK,{placeholder:"Pillih Status Pembayaran"})}),(0,s.jsx)(eO,{children:(0,s.jsxs)(eM,{children:[(0,s.jsx)(eV,{children:"Status"}),(0,s.jsx)(eq,{value:"lunas",children:"Lunas"}),(0,s.jsx)(eq,{value:"belom lunas",children:"Belom Lunas"})]})})]}),(0,s.jsx)(eQ,{children:(0,s.jsx)(f.$,{onClick:()=>{if(!_){alert("❌ Please select a payment method.");return}"7"===_?(N(!1),C(!0)):(N(!1),k(!0))},children:"Confirm"})})]})}),(0,s.jsx)(eF,{open:S,onOpenChange:C,children:(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eW,{children:"Enter DP Details"}),(0,s.jsx)(g.p,{type:"number",placeholder:"Enter DP Amount",value:E,onChange:e=>z(parseFloat(e.target.value)||0),className:"mt-2"}),(0,s.jsxs)("div",{className:"mt-2",children:["Sisa: Rp."," ",(K(q())-E).toLocaleString("id-ID")]}),(0,s.jsx)(eQ,{children:(0,s.jsx)(f.$,{onClick:()=>{C(!1),k(!0)},children:"Confirm DP"})})]})}),(0,s.jsx)(eF,{open:w,onOpenChange:k,children:(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eW,{children:"Are you sure you want to make this sale?"}),(0,s.jsxs)(eQ,{children:[(0,s.jsx)(f.$,{variant:"destructive",onClick:()=>k(!1),children:"Cancel"}),(0,s.jsx)(f.$,{onClick:H,children:"Yes, Confirm"})]})]})})]})})}eW.displayName=y.hE.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(y.VY,{ref:a,className:(0,p.cn)("text-sm text-muted-foreground",t),...r})}).displayName=y.VY.displayName;var eY=t(9789),e0=t(9083),e1=t(32),e2=t(7586),e4=t(9866),e5=t.n(e4),e8=t(5012),e6=t(2222);function e3(e){let{className:a,classNames:t,showOutsideDays:r=!0,...n}=e;return(0,s.jsx)(e6.hv,{showOutsideDays:r,className:(0,p.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,p.cn)((0,f.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,p.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===n.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,p.cn)((0,f.r)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{className:a,...t}=e;return(0,s.jsx)(e8.A,{className:(0,p.cn)("h-4 w-4",a),...t})},IconRight:e=>{let{className:a,...t}=e;return(0,s.jsx)(i.A,{className:(0,p.cn)("h-4 w-4",a),...t})}},...n})}e3.displayName="Calendar";var e7=t(532);let e9=e7.bL,ae=e7.l9;e7.Mz;let aa=r.forwardRef((e,a)=>{let{className:t,align:r="center",sideOffset:n=4,...l}=e;return(0,s.jsx)(e7.ZL,{children:(0,s.jsx)(e7.UC,{ref:a,align:r,sideOffset:n,className:(0,p.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});aa.displayName=e7.UC.displayName;var at=t(2897);let as={1:"Tunai",2:"Debit",3:"Transfer",4:"Cek / GIRO",5:"QR",6:"Hutang"};var ar=t(5715);let an={Dashboard:(0,s.jsx)(()=>{let[e,a]=(0,r.useState)("toko"),[t,n]=(0,r.useState)([]),[l,i]=(0,r.useState)(""),[d,o]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(null),[x,p]=(0,r.useState)("inventory_toko"),[j,b]=(0,r.useState)(null),[y,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[k,S]=(0,r.useState)(""),[C,_]=(0,r.useState)(null),[R,P]=(0,r.useState)(!1),I=(0,r.useCallback)(async()=>{try{let a=await fetch("http://localhost:8080/api/inventory/".concat(e));if(!a.ok)throw Error("Failed to fetch inventory");let t=await a.json();n(t.data||[])}catch(e){console.error("Error fetching data:",e)}},[e]);(0,r.useEffect)(()=>{I()},[I]);let T=e=>e.quantity*e.price,D=t.filter(e=>e.item_id.toLowerCase().includes(l.toLowerCase())||e.description.toLowerCase().includes(l.toLowerCase())),E=async()=>{if(v(!1),!c||null===m){b("Item ID dan Quantity harus diisi!");return}try{if(!(await fetch("http://localhost:8080/api/items/".concat(c),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:x,quantity:m})})).ok)throw Error("Gagal memperbarui inventory");I(),o(!1),u(""),h(null),b(null)}catch(e){console.error("Error updating inventory:",e),b("Gagal memperbarui inventory. Coba lagi.")}},z=async()=>{if(P(!1),!k||null===C||C<=0){b("❌ Item ID dan Harga Baru harus diisi!");return}console.log("\uD83D\uDCE4 Sending PUT request to /api/items/price with payload:",{item_id:k,price:C});try{if(!(await fetch("http://localhost:8080/api/items/price",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:k,price:C})})).ok)throw Error("Gagal memperbarui harga");I(),w(!1),S(""),_(null),b(null)}catch(e){console.error("Error updating price:",e),b("Gagal memperbarui harga. Coba lagi.")}};return(0,s.jsxs)("div",{className:"p-4 text-lg font-semibold",children:[(0,s.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,s.jsxs)(eF,{open:d,onOpenChange:o,children:[(0,s.jsx)(e$,{asChild:!0,children:(0,s.jsx)(f.$,{variant:"outline",children:"Koreksi Inventory"})}),(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eZ,{children:(0,s.jsx)(eW,{children:"Koreksi Inventory"})}),(0,s.jsx)(g.p,{placeholder:"Item ID",value:c,onChange:e=>u(e.target.value)}),(0,s.jsx)(g.p,{type:"number",placeholder:"Quantity",value:null!=m?m:"",onChange:e=>h(Number(e.target.value))}),(0,s.jsxs)(ez,{onValueChange:e=>{console.log("Selected location:",e),p(e)},value:x,children:[(0,s.jsx)(eL,{className:"w-full",children:(0,s.jsx)(eK,{placeholder:"Pilih Lokasi"})}),(0,s.jsxs)(eO,{children:[(0,s.jsx)(eq,{value:"inventory_toko",children:"Toko"}),(0,s.jsx)(eq,{value:"inventory_gudang",children:"Gudang"}),(0,s.jsx)(eq,{value:"inventory_tiktok",children:"TikTok"})]})]}),j&&(0,s.jsx)("div",{className:"text-red-500",children:j}),(0,s.jsx)(f.$,{onClick:()=>{if(!c||null===m||!x){b("❌ Item ID, Quantity, dan Lokasi harus diisi!");return}b(null),v(!0)},className:"w-full mt-4",children:"Simpan Perubahan"})]})]}),(0,s.jsxs)(eF,{open:N,onOpenChange:w,children:[(0,s.jsx)(e$,{asChild:!0,children:(0,s.jsx)(f.$,{variant:"outline",children:"Koreksi Harga"})}),(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eZ,{children:(0,s.jsx)(eW,{children:"Koreksi Harga"})}),(0,s.jsx)(g.p,{placeholder:"Item ID",value:k,onChange:e=>S(e.target.value)}),(0,s.jsx)(g.p,{type:"number",placeholder:"Harga Baru",value:null!=C?C:"",onChange:e=>_(Number(e.target.value))}),j&&(0,s.jsx)("div",{className:"text-red-500",children:j}),(0,s.jsx)(f.$,{onClick:()=>P(!0),className:"w-full mt-4",children:"Simpan Perubahan"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)(ez,{onValueChange:e=>a(e),value:e,children:[(0,s.jsx)(eL,{className:"w-[200px]",children:(0,s.jsx)(eK,{placeholder:"Select Inventory"})}),(0,s.jsxs)(eO,{children:[(0,s.jsx)(eq,{value:"toko",children:"Toko"}),(0,s.jsx)(eq,{value:"gudang",children:"Gudang"}),(0,s.jsx)(eq,{value:"tiktok",children:"TikTok"}),(0,s.jsx)(eq,{value:"rusak",children:"Rusak"})]})]}),(0,s.jsx)(g.p,{placeholder:"Cari pakai ID Barang ato Deskripsi...",value:l,onChange:e=>i(e.target.value),className:"w-[300px]"})]}),(0,s.jsx)(eF,{open:y,onOpenChange:v,children:(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eZ,{children:(0,s.jsx)(eW,{children:"Konfirmasi Perubahan"})}),(0,s.jsx)("p",{children:"Apakah Anda yakin ingin mengubah inventory dengan data berikut?"}),(0,s.jsxs)("ul",{className:"list-disc ml-6 text-sm text-gray-700",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Item ID:"})," ",c]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Quantity:"})," ",m]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Lokasi:"})," ",x]})]}),(0,s.jsxs)(eQ,{children:[(0,s.jsx)(f.$,{variant:"outline",onClick:()=>v(!1),children:"Batal"}),(0,s.jsx)(f.$,{className:"bg-blue-600 text-white",onClick:E,children:"Konfirmasi"})]})]})}),(0,s.jsx)(eF,{open:R,onOpenChange:P,children:(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eZ,{children:(0,s.jsx)(eW,{children:"Konfirmasi Perubahan Harga"})}),(0,s.jsx)("p",{children:"Apakah Anda yakin ingin mengubah harga barang ini?"}),(0,s.jsxs)("ul",{className:"list-disc ml-6 text-sm text-gray-700",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Item ID:"})," ",k]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Harga Baru:"})," Rp.",null==C?void 0:C.toLocaleString("id-ID")]})]}),(0,s.jsxs)(eQ,{children:[(0,s.jsx)(f.$,{variant:"outline",onClick:()=>P(!1),children:"Batal"}),(0,s.jsx)(f.$,{className:"bg-blue-600 text-white",onClick:z,children:"Konfirmasi"})]})]})}),(0,s.jsxs)(eH.Zp,{children:[(0,s.jsxs)(eH.aR,{children:[(0,s.jsxs)(eH.ZB,{children:["Inventory - ",e.charAt(0).toUpperCase()+e.slice(1)]}),(0,s.jsxs)("div",{className:"text-lg font-bold text-black-600",children:["Grand Total: Rp.",t.reduce((e,a)=>e+T(a),0).toLocaleString("id-ID")]})]}),(0,s.jsx)(eH.Wu,{children:(0,s.jsxs)(ek,{children:[(0,s.jsx)(eS,{children:(0,s.jsxs)(eR,{children:[(0,s.jsx)(eP,{children:"ID Barang"}),(0,s.jsx)(eP,{children:"Deskripsi"}),(0,s.jsx)(eP,{children:"Quantity"}),(0,s.jsx)(eP,{children:"Harga Satuan"}),(0,s.jsx)(eP,{children:"Total Harga"})]})}),(0,s.jsx)(eC,{children:D.map(e=>(0,s.jsxs)(eR,{children:[(0,s.jsx)(eI,{children:e.item_id}),(0,s.jsx)(eI,{children:e.description}),(0,s.jsx)(eI,{children:e.quantity}),(0,s.jsxs)(eI,{children:["Rp.",e.price.toLocaleString("id-ID")]}),(0,s.jsxs)(eI,{children:["Rp.",T(e).toLocaleString("id-ID")]})]},e.item_id))})]})})]})]})},{}),"Penjualan Toko":(0,s.jsx)(eX,{location:"toko"}),"Penjualan TikTok":(0,s.jsx)(eX,{location:"tiktok"}),"Penjualan Gudang":(0,s.jsx)(eX,{location:"gudang"}),"Telusuri Item lewat ID":(0,s.jsx)(function(){var e;let[a,t]=r.useState([]),[n,l]=r.useState(""),[i,d]=r.useState([]),[o,c]=r.useState({}),[u,m]=r.useState(null),[h,x]=r.useState({});r.useEffect(()=>{(async()=>{try{let e=await fetch("http://localhost:8080/api/sales",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch sales data");let a=await e.json();a&&a.data&&Array.isArray(a.data)&&t(a.data)}catch(e){m("Error fetching sales data. Please try again."),console.error(e)}})()},[]),r.useEffect(()=>{(async()=>{try{let e=await fetch("http://localhost:8080/api/transactions/discount_percent");if(!e.ok)throw Error("Failed to fetch discounts. Status: ".concat(e.status));let a=await e.json();if(!a||"object"!=typeof a||!a.data||!Array.isArray(a.data))throw Error("Invalid data format: Expected an object with a 'data' array");let t={};a.data.forEach(e=>{"number"==typeof e.transaction_id&&"number"==typeof e.discount_percent&&(t[e.transaction_id]=e.discount_percent)}),x(t)}catch(e){console.error("Error fetching discounts:",e)}})()},[]);let p=r.useMemo(()=>a.filter(e=>e.item_id.toLowerCase().includes(n.toLowerCase())).sort((e,a)=>a.sale_id-e.sale_id),[a,n]),j=[{accessorKey:"sale_id",header:"No. Penjualan",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{children:a.getValue("sale_id")})}},{accessorKey:"item_id",header:"Kode Barang",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{children:a.getValue("item_id")})}},{accessorKey:"description",header:"Keterangan",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"capitalize",children:a.getValue("description")})}},{accessorKey:"quantity",header:"Quantity",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"text-center",children:a.getValue("quantity")})}},{accessorKey:"quantity_retur",header:"Quantity Retur",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"text-center",children:a.getValue("quantity_retur")})}},{accessorKey:"price",header:"Harga",cell:e=>{let{row:a}=e,t=parseFloat(a.getValue("price")),r=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t);return(0,s.jsx)("div",{className:"text-right",children:r})}},{accessorKey:"total",header:"Total",cell:e=>{var a;let{row:t}=e,r=null!==(a=h[t.getValue("transaction_id")])&&void 0!==a?a:0,n=Number(t.getValue("quantity"))||0,l=Number(t.getValue("quantity_retur"))||0,i=Number(t.getValue("price"))||0,d=Number(t.getValue("discount_per_item"))||0,o=Math.max(n-l,0),c=o*i,u=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(c-((d>0?d*o:0)+(0===d&&r>0?c*r/100:0)));return(0,s.jsx)("div",{className:"text-right font-medium",children:u})}},{accessorKey:"discount_per_item",header:"Discount (Rp)",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"text-center",children:a.getValue("discount_per_item")})}},{accessorKey:"transaction_id",header:"No. Faktur",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"text-center",children:a.getValue("transaction_id")})}}],b=(0,eY.N4)({data:p,columns:j,getCoreRowModel:(0,e0.HT)(),getPaginationRowModel:(0,e0.kW)(),getSortedRowModel:(0,e0.h5)(),onSortingChange:d,onColumnVisibilityChange:c,state:{sorting:i,columnVisibility:o},initialState:{pagination:{pageSize:50}}});return(0,s.jsx)("div",{className:"w-full flex justify-center py-4",children:(0,s.jsxs)("div",{className:"w-full max-w-4xl",children:[u&&(0,s.jsx)("div",{className:"text-red-500 text-center py-2",children:u}),(0,s.jsxs)("div",{className:"flex items-center py-4",children:[(0,s.jsx)(g.p,{placeholder:"Telusuri Penjualan dengan Kode Barang...",value:n,onChange:e=>l(e.target.value),className:"max-w-sm"}),(0,s.jsxs)(eo,{children:[(0,s.jsx)(ec,{asChild:!0,children:(0,s.jsxs)(f.$,{variant:"outline",className:"ml-auto",children:["Columns ",(0,s.jsx)(eD.A,{})]})}),(0,s.jsx)(eu,{align:"end",children:b.getAllColumns().filter(e=>e.getCanHide()).map(e=>(0,s.jsx)(eh,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:a=>e.toggleVisibility(!!a),children:e.id},e.id))})]})]}),(0,s.jsx)("div",{className:"rounded-md border mx-auto bg-white shadow-md",children:(0,s.jsxs)(ek,{className:"table-auto w-full",children:[(0,s.jsx)(eS,{children:b.getHeaderGroups().map(e=>(0,s.jsx)(eR,{children:e.headers.map(e=>(0,s.jsx)(eP,{children:e.isPlaceholder?null:(0,eY.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(eC,{children:(null===(e=b.getRowModel().rows)||void 0===e?void 0:e.length)?b.getRowModel().rows.map(e=>(0,s.jsx)(eR,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,s.jsx)(eI,{className:"description"===e.column.id?"capitalize text-left":"text-center",children:(0,eY.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(eR,{children:(0,s.jsx)(eI,{colSpan:j.length,className:"h-24 text-center",children:"No results."})})})]})})]})})},{}),"History Transaksi":(0,s.jsx)(function(){var e;let[a,t]=r.useState([]),[n,l]=r.useState(""),[i,d]=r.useState([]),[o,c]=r.useState({}),[u,m]=r.useState(null),[h,x]=r.useState(!1),[p,j]=r.useState(""),[b,y]=r.useState(""),v={1:"Tunai",2:"Debit",3:"Transfer",4:"Cek / GIRO",5:"QR",6:"Hutang",7:"DP"};r.useEffect(()=>{(async()=>{try{let e=await fetch("http://localhost:8080/api/transactions",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch transactions (Status: ".concat(e.status,")"));let a=await e.json();if(console.log("\uD83D\uDD39 API Response:",a),a&&a.data&&Array.isArray(a.data))t(a.data);else throw Error("Unexpected API response format")}catch(e){m("Error fetching transaction history. Please try again."),console.error(e)}})()},[]);let N=r.useMemo(()=>a.filter(e=>e.customer_name.toLowerCase().includes(n.toLowerCase())).sort((e,a)=>a.transaction_id-e.transaction_id),[a,n]),w=[{accessorKey:"transaction_id",header:"No. Faktur",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{children:a.getValue("transaction_id")})}},{accessorKey:"customer_name",header:"Nama Pembeli",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"capitalize",children:a.getValue("customer_name")})}},{accessorKey:"discount_type",header:"Tipe Discount",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"text-center",children:a.getValue("discount_type")})}},{accessorKey:"discount_percent",header:"Discount (%)",cell:e=>{let{row:a}=e;return(0,s.jsxs)("div",{className:"text-center",children:[a.getValue("discount_percent")," %"]})}},{accessorKey:"total_discount",header:"Total Discount",cell:e=>{let{row:a}=e,t=parseFloat(a.getValue("total_discount")),r=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t);return(0,s.jsx)("div",{className:"text-right",children:r})}},{accessorKey:"total_price",header:()=>(0,s.jsx)("div",{className:"text-right",children:"Total"}),cell:e=>{let{row:a}=e;return(0,s.jsxs)("div",{className:"text-right",children:["Rp. ",a.getValue("total_price")]})}},{accessorKey:"payment_id",header:"Metode Pembayaran",cell:e=>{let{row:a}=e,t=a.getValue("payment_id");return(0,s.jsx)("div",{className:"text-center",children:v[t]||"Unknown"})}},{accessorKey:"down_payment",header:"Terbayar",cell:e=>{let{row:a}=e;return(0,s.jsxs)("div",{className:"text-right",children:["Rp. ",a.getValue("down_payment")]})}},{accessorKey:"sisa",header:"Sisa",cell:e=>{let{row:a}=e,t=a.getValue("total_price"),r=a.getValue("down_payment");return(0,s.jsxs)("div",{className:"text-right",children:["Rp. ",(t-r).toLocaleString("id-ID")]})}},{accessorKey:"payment_status",header:"Status Pembayaran",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"text-center",children:a.getValue("payment_status")})}},{accessorKey:"timestamp",header:"Tanggal & Waktu",cell:e=>{let{row:a}=e,t=a.getValue("timestamp");if(!t)return(0,s.jsx)("div",{className:"text-center text-red-500",children:"Invalid Date"});let r=new Date(t);if(isNaN(r.getTime()))return(0,s.jsx)("div",{className:"text-center text-red-500",children:"Invalid Date"});let n=r.getFullYear(),l=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0"),d=String(r.getHours()).padStart(2,"0"),o=String(r.getMinutes()).padStart(2,"0"),c=String(r.getSeconds()).padStart(2,"0"),u="".concat(n,"-").concat(l,"-").concat(i," ").concat(d,":").concat(o,":").concat(c);return(0,s.jsx)("div",{className:"text-center",children:u})}}],k=async()=>{if(!p||!b){alert("❌ Transaction ID dan Status Pembayaran harus dipilih!");return}try{if(!(await fetch("http://localhost:8080/api/transactions/payment/".concat(p),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_status:b})})).ok)throw Error("Gagal memperbarui status pembayaran");alert("✅ Status pembayaran berhasil diperbarui!"),x(!1),j(""),y("");let e=await fetch("http://localhost:8080/api/transactions"),a=await e.json();t(a.data)}catch(e){console.error("Error updating payment status:",e),alert("❌ Gagal memperbarui status pembayaran. Coba lagi.")}},S=(0,eY.N4)({data:N,columns:w,getCoreRowModel:(0,e0.HT)(),getPaginationRowModel:(0,e0.kW)(),getSortedRowModel:(0,e0.h5)(),onSortingChange:d,onColumnVisibilityChange:c,state:{sorting:i,columnVisibility:o},initialState:{pagination:{pageSize:50}}});return(0,s.jsx)("div",{className:"w-full flex justify-center py-4",children:(0,s.jsxs)("div",{className:"w-full max-w-4xl",children:[u&&(0,s.jsx)("div",{className:"text-red-500 text-center py-2",children:u}),(0,s.jsxs)(eF,{open:h,onOpenChange:x,children:[(0,s.jsx)(e$,{asChild:!0,children:(0,s.jsx)(f.$,{variant:"outline",className:"mb-4",children:"Koreksi Status Pembayaran"})}),(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eZ,{children:(0,s.jsx)(eW,{children:"Koreksi Status Pembayaran"})}),(0,s.jsx)(g.p,{placeholder:"Masukkan No. Faktur",value:p,onChange:e=>j(e.target.value)}),(0,s.jsxs)(ez,{onValueChange:e=>y(e),value:b,children:[(0,s.jsx)(eL,{className:"w-full",children:(0,s.jsx)(eK,{placeholder:"Pilih Status Pembayaran"})}),(0,s.jsxs)(eO,{children:[(0,s.jsx)(eq,{value:"lunas",children:"Lunas"}),(0,s.jsx)(eq,{value:"belum lunas",children:"Belum Lunas"})]})]}),(0,s.jsxs)(eQ,{children:[(0,s.jsx)(f.$,{variant:"outline",onClick:()=>x(!1),children:"Batal"}),(0,s.jsx)(f.$,{className:"bg-blue-600 text-white",onClick:k,children:"Konfirmasi"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center py-4",children:[(0,s.jsx)(g.p,{placeholder:"Cari pakai nama customer...",value:n,onChange:e=>l(e.target.value),className:"max-w-sm"}),(0,s.jsxs)(eo,{children:[(0,s.jsx)(ec,{asChild:!0,children:(0,s.jsxs)(f.$,{variant:"outline",className:"ml-auto",children:["Columns ",(0,s.jsx)(eD.A,{})]})}),(0,s.jsx)(eu,{align:"end",children:S.getAllColumns().filter(e=>e.getCanHide()).map(e=>(0,s.jsx)(eh,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:a=>e.toggleVisibility(!!a),children:e.id},e.id))})]})]}),(0,s.jsx)("div",{className:"rounded-md border mx-auto bg-white shadow-md",children:(0,s.jsxs)(ek,{className:"table-auto w-full",children:[(0,s.jsx)(eS,{children:S.getHeaderGroups().map(e=>(0,s.jsx)(eR,{children:e.headers.map(e=>(0,s.jsx)(eP,{children:e.isPlaceholder?null:(0,eY.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(eC,{children:(null===(e=S.getRowModel().rows)||void 0===e?void 0:e.length)?S.getRowModel().rows.map(e=>(0,s.jsx)(eR,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,s.jsx)(eI,{className:"text-center",children:(0,eY.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(eR,{children:(0,s.jsx)(eI,{colSpan:w.length,className:"h-24 text-center",children:"No results found."})})})]})})]})})},{}),Pindahan:(0,s.jsx)(function(){let[e,a]=(0,r.useState)(""),[t,l]=(0,r.useState)(""),[i,d]=(0,r.useState)([{item_id:"",quantity:0}]),[o,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),h=(e,a,t)=>{let s=[...i];s[e]={...s[e],[a]:t},d(s)},x=e=>{i.length>1&&d(i.filter((a,t)=>t!==e))},p=async()=>{m(!1);let s={source:e,destination:t,items:i.map(e=>{let{item_id:a,quantity:t}=e;return{item_id:a,quantity:Number(t)}})};try{console.log("\uD83D\uDD04 Sending POST request (Transferring Items):",JSON.stringify(s,null,2));let e=await fetch("http://localhost:8080/api/inventory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!e.ok)throw Error("Failed to transfer items (Status: ".concat(e.status,")"));c("✅ Items transferred successfully!"),d([{item_id:"",quantity:0}]),a(""),l("")}catch(e){c("❌ Error transferring items. Please try again."),console.error(e)}};return(0,s.jsxs)("div",{className:"w-full max-w-5xl mx-auto mt-10 p-6 bg-white shadow-md rounded-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-center mb-4",children:"Pindahan Inventory"}),o&&(0,s.jsx)("div",{className:"text-center mb-4 ".concat(o.startsWith("✅")?"text-green-600":"text-red-600"),children:o}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Dari"}),(0,s.jsxs)(ez,{onValueChange:a,children:[(0,s.jsx)(eL,{className:"w-full mt-1",children:(0,s.jsx)(eK,{placeholder:"Pilih Sumber"})}),(0,s.jsx)(eO,{children:(0,s.jsxs)(eM,{children:[(0,s.jsx)(eV,{children:"Inventories"}),(0,s.jsx)(eq,{value:"gudang",children:"Gudang"}),(0,s.jsx)(eq,{value:"toko",children:"Toko"}),(0,s.jsx)(eq,{value:"tiktok",children:"TikTok"})]})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Ke"}),(0,s.jsxs)(ez,{onValueChange:l,children:[(0,s.jsx)(eL,{className:"w-full mt-1",children:(0,s.jsx)(eK,{placeholder:"Pilih Destinasi"})}),(0,s.jsx)(eO,{children:(0,s.jsxs)(eM,{children:[(0,s.jsx)(eV,{children:"Inventories"}),(0,s.jsx)(eq,{value:"gudang",children:"Gudang"}),(0,s.jsx)(eq,{value:"toko",children:"Toko"}),(0,s.jsx)(eq,{value:"tiktok",children:"TikTok"})]})})]})]})]}),(0,s.jsxs)(ek,{children:[(0,s.jsx)(eS,{children:(0,s.jsxs)(eR,{children:[(0,s.jsx)(eP,{children:"Kode Barang"}),(0,s.jsx)(eP,{children:"Quantity"}),(0,s.jsx)(eP,{children:"Aksi"})]})}),(0,s.jsx)(eC,{children:i.map((e,a)=>(0,s.jsxs)(eR,{children:[(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{type:"text",placeholder:"Kode Barang",value:e.item_id,onChange:e=>h(a,"item_id",e.target.value)})}),(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{type:"number",placeholder:"Quantity",value:e.quantity,onChange:e=>h(a,"quantity",Number(e.target.value))})}),(0,s.jsx)(eI,{children:(0,s.jsx)(f.$,{variant:"destructive",onClick:()=>x(a),disabled:i.length<=1,children:(0,s.jsx)(n.NIP,{})})})]},a))})]}),(0,s.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,s.jsx)(f.$,{className:"bg-gray-800 text-white px-4 py-2",onClick:()=>{if(!e||!t||e===t){c("❌ Source and Destination must be different.");return}if(i.some(e=>!e.item_id||e.quantity<=0)){c("❌ All fields are required.");return}m(!0)},children:"Konfirmasi"}),(0,s.jsx)(f.$,{className:"bg-gray-800 text-white px-4 py-2 flex items-center gap-2",onClick:()=>{d([...i,{item_id:"",quantity:0}])},children:(0,s.jsx)(n.tNe,{})})]}),(0,s.jsx)(eF,{open:u,onOpenChange:m,children:(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eZ,{children:(0,s.jsx)(eW,{children:"Konfirmasi Pindahan"})}),(0,s.jsx)("p",{children:"Anda yakin ingin memindahkan barang ke lokasi baru?"}),(0,s.jsxs)(eQ,{children:[(0,s.jsx)(f.$,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),(0,s.jsx)(f.$,{className:"bg-blue-600 text-white",onClick:p,children:"Konfirmasi"})]})]})})]})},{}),"Retur Barang":(0,s.jsx)(function(){let[e,a]=(0,r.useState)([{sale_id:"",item_id:"",location:"inventory_gudang",quantity:0,condition:"Tidak Rusak"}]),[t,l]=(0,r.useState)(null),[i,d]=(0,r.useState)(!1),o=(t,s,r)=>{let n=[...e];n[t]={...n[t],[s]:r},a(n)},c=t=>{e.length>1&&a(e.filter((e,a)=>a!==t))},u=async()=>{d(!1);try{console.log("\uD83D\uDD04 Sending PUT request (Returning Items):",JSON.stringify(e,null,2));let t=e.filter(e=>"Rusak"===e.condition).map(e=>{let{item_id:a,quantity:t,sale_id:s}=e;return{item_id:a,quantity:t,sale_id:Number(s)}}),s=e.filter(e=>"Tidak Rusak"===e.condition).map(e=>{let{item_id:a,quantity:t,sale_id:s}=e;return{item_id:a,quantity:t,sale_id:Number(s)}});if(t.length>0){console.log("\uD83D\uDEA8 Sending request for DAMAGED items...");let e={items:t.map(e=>{let{item_id:a,quantity:t,sale_id:s}=e;return{item_id:a,quantity:t,sale_id:s}})};console.log(e);let a=await fetch("http://localhost:8080/api/items/rusak",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error("Failed to return DAMAGED items (Status: ".concat(a.status,")"))}if(s.length>0){console.log("✅ Sending request for NORMAL returned items...");let e={items:s.map(e=>{let{item_id:a,quantity:t,sale_id:s}=e;return{item_id:a,quantity:t,sale_id:s}})};console.log(e);let a=await fetch("http://localhost:8080/api/items",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error("Failed to return NORMAL items (Status: ".concat(a.status,")"))}l("✅ Item return request submitted successfully!"),a([{sale_id:"",item_id:"",location:"inventory_gudang",quantity:0,condition:"Tidak Rusak"}])}catch(e){l("❌ Error returning items. Please try again."),console.error(e)}};return(0,s.jsxs)("div",{className:"w-full max-w-5xl mx-auto mt-10 p-6 bg-white shadow-md rounded-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-center mb-4",children:"Retur Barang"}),t&&(0,s.jsx)("div",{className:"text-center mb-4 ".concat(t.startsWith("✅")?"text-green-600":"text-red-600"),children:t}),(0,s.jsxs)(ek,{children:[(0,s.jsx)(eS,{children:(0,s.jsxs)(eR,{children:[(0,s.jsx)(eP,{children:"No. Penjualan"}),(0,s.jsx)(eP,{children:"Kode Barang"}),(0,s.jsx)(eP,{children:"Quantity"}),(0,s.jsx)(eP,{children:"Kondisi"}),(0,s.jsx)(eP,{children:"Aksi"})]})}),(0,s.jsx)(eC,{children:e.map((a,t)=>(0,s.jsxs)(eR,{children:[(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{type:"text",placeholder:"No. Penjualan",value:a.sale_id,onChange:e=>o(t,"sale_id",e.target.value)})}),(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{type:"text",placeholder:"Kode Barang",value:a.item_id,onChange:e=>o(t,"item_id",e.target.value)})}),(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{type:"number",placeholder:"Quantity",value:a.quantity,onChange:e=>o(t,"quantity",Number(e.target.value))})}),(0,s.jsx)(eI,{children:(0,s.jsxs)(ez,{value:a.condition,onValueChange:e=>o(t,"condition",e),children:[(0,s.jsx)(eL,{className:"w-full",children:(0,s.jsx)(eK,{placeholder:"Pilih Kondisi"})}),(0,s.jsxs)(eO,{children:[(0,s.jsx)(eq,{value:"Rusak",children:"Rusak"}),(0,s.jsx)(eq,{value:"Tidak Rusak",children:"Tidak Rusak"})]})]})}),(0,s.jsx)(eI,{children:(0,s.jsx)(f.$,{variant:"destructive",onClick:()=>c(t),disabled:e.length<=1,children:(0,s.jsx)(n.NIP,{})})})]},t))})]}),(0,s.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,s.jsx)(f.$,{className:"bg-gray-800 text-white px-4 py-2",onClick:()=>{if(e.some(e=>!e.sale_id||!e.item_id||e.quantity<=0)){l("❌ Sale ID, Item ID, and Quantity are required.");return}d(!0)},children:"Konfirmasi"}),(0,s.jsx)(f.$,{className:"bg-gray-800 text-white px-4 py-2 flex items-center gap-2",onClick:()=>{a([...e,{sale_id:"",item_id:"",location:"inventory_gudang",quantity:0,condition:"Tidak Rusak"}])},children:(0,s.jsx)(n.tNe,{})})]}),(0,s.jsx)(eF,{open:i,onOpenChange:d,children:(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eZ,{children:(0,s.jsx)(eW,{children:"Konfirmasi Retur Produk"})}),(0,s.jsx)("p",{children:"Anda yakin ingin mengembalikan barang ke Inventory Gudang?"}),(0,s.jsxs)(eQ,{children:[(0,s.jsx)(f.$,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,s.jsx)(f.$,{className:"bg-red-600 text-white",onClick:u,children:"Konfirmasi"})]})]})})]})},{}),"Terima Barang":(0,s.jsx)(function(){let[e,a]=(0,r.useState)([{item_id:"",price:0,quantity:0,description:""}]),[t,l]=(0,r.useState)(null),[i,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)([]),[u,m]=(0,r.useState)([]),h=async e=>{try{let a=await fetch("http://localhost:8080/api/items");if(!a.ok)throw Error("Failed to fetch items");return((await a.json()).data||[]).some(a=>a.item_id===e)}catch(e){return console.error("Error checking item:",e),!1}},x=(t,s,r)=>{let n=[...e];n[t]={...n[t],[s]:r},a(n)},p=t=>{e.length>1&&a(e.filter((e,a)=>a!==t))},j=async()=>{if(e.some(e=>!e.item_id||e.quantity<=0)){l("❌ All fields are required.");return}try{let a=await Promise.all(e.map(async e=>({item:e,exists:await h(e.item_id)}))),t=a.filter(e=>e.exists).map(e=>e.item),s=a.filter(e=>!e.exists).map(e=>e.item);c(t),m(s),d(!0)}catch(e){l("❌ Error checking item existence."),console.error(e)}},b=async()=>{d(!1);try{let e=[];if(o.length>0&&(console.log("\uD83D\uDD04 Sending PUT request (Updating Items):",{items:o}),e.push(fetch("http://localhost:8080/api/items",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:o.map(e=>{let{item_id:a,quantity:t}=e;return{item_id:a,quantity:t}})})}))),u.length>0&&(console.log("\uD83C\uDD95 Sending POST request (Creating New Items):",{items:u}),e.push(fetch("http://localhost:8080/api/items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:u})}))),(await Promise.all(e)).some(e=>!e.ok))throw Error("Some inventory updates failed.");l("✅ Inventory successfully updated!"),a([{item_id:"",price:0,quantity:0,description:""}])}catch(e){l("❌ Error updating inventory. Please try again."),console.error(e)}};return(0,s.jsxs)("div",{className:"w-full max-w-5xl mx-auto mt-10 p-6 bg-white shadow-md rounded-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-center mb-4",children:"Terima Barang"}),t&&(0,s.jsx)("div",{className:"text-center mb-4 ".concat(t.startsWith("✅")?"text-green-600":"text-red-600"),children:t}),(0,s.jsxs)(ek,{children:[(0,s.jsx)(eS,{children:(0,s.jsxs)(eR,{children:[(0,s.jsx)(eP,{children:"Kode Barang"}),(0,s.jsx)(eP,{children:"Harga Satuan"}),(0,s.jsx)(eP,{children:"Quantity"}),(0,s.jsx)(eP,{children:"Keterangan"}),(0,s.jsx)(eP,{children:"Aksi"})]})}),(0,s.jsx)(eC,{children:e.map((a,t)=>(0,s.jsxs)(eR,{children:[(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{type:"text",placeholder:"Kode Barang",value:a.item_id,onChange:e=>x(t,"item_id",e.target.value)})}),(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{type:"number",placeholder:"Harga Satuan",value:a.price,onChange:e=>x(t,"price",Number(e.target.value))})}),(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{type:"number",placeholder:"Quantity",value:a.quantity,onChange:e=>x(t,"quantity",Number(e.target.value))})}),(0,s.jsx)(eI,{children:(0,s.jsx)(g.p,{type:"text",placeholder:"Keterangan",value:a.description,onChange:e=>x(t,"description",e.target.value)})}),(0,s.jsx)(eI,{children:(0,s.jsx)(f.$,{variant:"destructive",onClick:()=>p(t),disabled:e.length<=1,children:(0,s.jsx)(n.NIP,{})})})]},t))})]}),(0,s.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,s.jsx)(f.$,{className:"bg-gray-800 text-white px-4 py-2",onClick:j,children:"Konfirmasi"}),(0,s.jsx)(f.$,{className:"bg-gray-800 text-white px-4 py-2 flex items-center gap-2",onClick:()=>{a([...e,{item_id:"",price:0,quantity:0,description:""}])},children:(0,s.jsx)(n.tNe,{})})]}),(0,s.jsx)(eF,{open:i,onOpenChange:d,children:(0,s.jsxs)(eJ,{children:[(0,s.jsx)(eZ,{children:(0,s.jsx)(eW,{children:"Konfirmasi Terima Barang"})}),(0,s.jsx)("p",{children:"Anda yakin ingin memperbarui/menambahkan barang ke Inventory Gudang?"}),(0,s.jsxs)(eQ,{children:[(0,s.jsx)(f.$,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,s.jsx)(f.$,{className:"bg-blue-600 text-white",onClick:b,children:"Konfirmasi"})]})]})})]})},{}),"Penjualan Harian":(0,s.jsx)(function(){let[e,a]=(0,r.useState)(new Date),[t,n]=(0,r.useState)([]),[l,i]=(0,r.useState)([]),[d,o]=(0,r.useState)([]);(0,r.useEffect)(()=>{c(),u()},[]),(0,r.useEffect)(()=>{m()},[e,t]);let c=async()=>{try{let e=await fetch("http://localhost:8080/api/sales");if(!e.ok)throw Error("Failed to fetch sales");let a=await e.json();o(a.data||[])}catch(e){console.error("Error fetching sales:",e)}},u=async()=>{try{let e=await fetch("http://localhost:8080/api/transactions");if(!e.ok)throw Error("Failed to fetch transactions");let a=await e.json();n(a.data||[])}catch(e){console.error("Error fetching transactions:",e)}},m=(0,r.useCallback)(()=>{let a=(0,e1.GP)(e,"yyyy-MM-dd");i(t.filter(e=>(0,e1.GP)((0,e2.H)(e.timestamp),"yyyy-MM-dd")===a))},[e,t]);(0,r.useEffect)(()=>{m()},[m]);let h=e=>e.reduce((e,a)=>e+a.amount,0),x=(()=>{let e={};return l.forEach(a=>{let t=as[a.payment_id]||"Unknown";e[t]||(e[t]=[]),d.filter(e=>e.transaction_id===a.transaction_id).forEach(s=>{let r=e[t].find(e=>e.customer===a.customer_name);r?r.amount+=s.total:e[t].push({customer:a.customer_name,amount:s.total})})}),e})();return(0,s.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Laporan Penjualan Harian"}),(0,s.jsxs)(e9,{children:[(0,s.jsx)(ae,{asChild:!0,children:(0,s.jsxs)(f.$,{variant:"outline",className:"flex items-center gap-2",children:[(0,s.jsx)(at.A,{className:"w-4 h-4"}),(0,e1.GP)(e,"dd/MM/yyyy")]})}),(0,s.jsx)(aa,{align:"end",children:(0,s.jsx)(e3,{mode:"single",selected:e,onSelect:e=>e&&a(e),className:"w-auto"})})]})]}),0===Object.keys(x).length?(0,s.jsx)("div",{className:"text-center text-gray-500 text-lg font-semibold mt-10",children:"❌ Tidak ada penjualan di tanggal ini."}):Object.keys(x).map(e=>(0,s.jsxs)(eH.Zp,{className:"mb-6",children:[(0,s.jsx)(eH.aR,{children:(0,s.jsx)(eH.ZB,{children:e})}),(0,s.jsxs)(eH.Wu,{children:[(0,s.jsxs)("div",{className:"flex justify-between text-xl font-semibold",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsxs)("span",{children:["Rp. ",h(x[e]).toLocaleString("id-ID")]})]}),(0,s.jsxs)(ek,{className:"mt-4",children:[(0,s.jsx)(eS,{children:(0,s.jsxs)(eR,{children:[(0,s.jsx)(eP,{children:"Nama Customer"}),(0,s.jsx)(eP,{className:"text-right",children:"Jumlah"})]})}),(0,s.jsx)(eC,{children:x[e].map((e,a)=>(0,s.jsxs)(eR,{children:[(0,s.jsx)(eI,{children:e.customer}),(0,s.jsxs)(eI,{className:"text-right",children:["Rp. ",e.amount.toLocaleString("id-ID")]})]},a))})]})]})]},e))]})},{}),"Penjualan Bulanan":(0,s.jsx)(function(){let[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)([]),[l,i]=(0,r.useState)({});(0,r.useEffect)(()=>{d(),o()},[]);let d=async()=>{try{let e=await fetch("http://localhost:8080/api/sales");if(!e.ok)throw Error("Failed to fetch sales");let t=await e.json();a(t.data||[])}catch(e){console.error("Error fetching sales:",e)}},o=async()=>{try{let e=await fetch("http://localhost:8080/api/transactions");if(!e.ok)throw Error("Failed to fetch transactions");let a=await e.json();n(a.data||[])}catch(e){console.error("Error fetching transactions:",e)}},c=(0,r.useCallback)(()=>{let a={};e.forEach(e=>{let s=t.find(a=>a.transaction_id===e.transaction_id);if(!s||!s.timestamp)return;let r=(0,e2.H)(s.timestamp),n=(0,e1.GP)(r,"MMMM yyyy",{locale:ar.id});a[n]||(a[n]=0),a[n]+=e.total}),i(a)},[e,t]);return(0,r.useEffect)(()=>{e.length>0&&t.length>0&&c()},[e,t,c]),(0,s.jsx)("div",{className:"flex flex-col justify-center items-center min-h-[85vh] mt-[-40px]",children:(0,s.jsx)("div",{className:"w-full max-w-5xl",children:(0,s.jsxs)(eH.Zp,{className:"shadow-lg rounded-2xl border border-gray-300",children:[(0,s.jsx)(eH.aR,{className:"text-center",children:(0,s.jsx)(eH.ZB,{className:"text-3xl font-bold",children:"Laporan Penjualan Bulanan"})}),(0,s.jsx)(eH.Wu,{className:"p-6",children:0===Object.keys(l).length?(0,s.jsx)("p",{className:"text-center text-gray-500 text-2xl font-semibold py-8",children:"❌ No sales data available."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(ek,{className:"w-full text-lg",children:[(0,s.jsx)(eS,{children:(0,s.jsxs)(eR,{className:"bg-gray-100 text-xl",children:[(0,s.jsx)(eP,{className:"px-6 py-4",children:"Bulan"}),(0,s.jsx)(eP,{className:"px-6 py-4 text-right",children:"\uD83D\uDCB0 Total Penjualan"})]})}),(0,s.jsx)(eC,{children:Object.entries(l).map(e=>{let[a,t]=e;return(0,s.jsxs)(eR,{className:"border-b text-xl",children:[(0,s.jsx)(eI,{className:"px-6 py-4",children:a}),(0,s.jsxs)(eI,{className:"px-6 py-4 text-right font-semibold",children:["Rp. ",t.toLocaleString("id-ID")]})]},a)})})]})})})]})})})},{}),"Pindahan Harian":(0,s.jsx)(function(){let[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(new Date),[l,i]=(0,r.useState)(!0),[d,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{c()},[t]);let c=async()=>{try{let e=await fetch("http://localhost:8080/api/history");if(!e.ok)throw Error("Failed to fetch history data");let t=await e.json();a(t.data||[])}catch(e){o("Failed to load history data"),console.error(e)}finally{i(!1)}},u=e.reduce((e,a)=>(e[a.group_id]||(e[a.group_id]=[]),e[a.group_id].push(a),e),{});return(0,s.jsx)("div",{className:"flex flex-col justify-center items-center min-h-[85vh] mt-[-40px]",children:(0,s.jsxs)("div",{className:"w-full max-w-4xl",children:[" ",(0,s.jsxs)(eH.Zp,{className:"shadow-md rounded-lg border border-gray-300",children:[(0,s.jsx)(eH.aR,{className:"text-center py-4",children:(0,s.jsx)(eH.ZB,{className:"text-xl font-semibold",children:"History Pindahan Harian"})}),(0,s.jsxs)(eH.Wu,{className:"p-4",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsxs)(e9,{children:[(0,s.jsx)(ae,{asChild:!0,children:(0,s.jsxs)(f.$,{variant:"outline",className:"flex items-center gap-2",children:[(0,s.jsx)(at.A,{className:"w-4 h-4"}),(0,e1.GP)(t,"dd/MM/yyyy")]})}),(0,s.jsx)(aa,{align:"end",children:(0,s.jsx)(e3,{mode:"single",selected:t,onSelect:e=>e&&n(e),className:"w-auto"})})]})}),l?(0,s.jsx)("div",{className:"text-center text-gray-500 text-lg",children:"Loading..."}):d?(0,s.jsx)("div",{className:"text-center text-red-500 text-lg",children:d}):0===Object.keys(u).length?(0,s.jsx)("div",{className:"text-center text-gray-500 text-lg font-semibold py-4",children:"❌ No history records found."}):Object.entries(u).map(e=>{let[a,t]=e;return(0,s.jsxs)(eH.Zp,{className:"mb-4 shadow-md rounded-lg border border-gray-200",children:[(0,s.jsx)(eH.aR,{children:(0,s.jsxs)(eH.ZB,{className:"text-md font-semibold",children:["Group ID: ",(0,s.jsx)("span",{className:"font-mono",children:a})]})}),(0,s.jsx)(eH.Wu,{className:"p-2",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(ek,{className:"w-full text-md",children:[(0,s.jsx)(eS,{children:(0,s.jsxs)(eR,{className:"bg-gray-100",children:[(0,s.jsx)(eP,{className:"px-4 py-2",children:"No."}),(0,s.jsx)(eP,{className:"px-4 py-2",children:"No. Barang"}),(0,s.jsx)(eP,{className:"px-4 py-2 text-right",children:"Quantity"}),(0,s.jsx)(eP,{className:"px-4 py-2",children:"Sumber"}),(0,s.jsx)(eP,{className:"px-4 py-2",children:"Destinasi"}),(0,s.jsx)(eP,{className:"px-4 py-2 text-right",children:"Waktu"})]})}),(0,s.jsx)(eC,{children:t.map(e=>(0,s.jsxs)(eR,{className:"border-b",children:[(0,s.jsx)(eI,{className:"px-4 py-2",children:e.pindahan_id}),(0,s.jsx)(eI,{className:"px-4 py-2",children:e.item_id}),(0,s.jsx)(eI,{className:"px-4 py-2 text-right",children:e.quantity}),(0,s.jsx)(eI,{className:"px-4 py-2",children:e.source}),(0,s.jsx)(eI,{className:"px-4 py-2",children:e.destination}),(0,s.jsx)(eI,{className:"px-4 py-2 text-right",children:(0,e1.GP)((0,e2.H)(e.timestamp),"dd/MM/yyyy HH:mm:ss")})]},e.pindahan_id))})]})})})]},a)})]})]})]})})},{}),"Pindahan Bulanan":(0,s.jsx)(function(){let[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[l,i]=(0,r.useState)(null);(0,r.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await fetch("http://localhost:8080/api/history");if(!e.ok)throw Error("Failed to fetch history data");let t=await e.json();a(t.data||[])}catch(e){i("Failed to load history data"),console.error(e)}finally{n(!1)}},o=e5()(e,e=>(0,e1.GP)((0,e2.H)(e.timestamp),"MMMM yyyy"));return(0,s.jsx)("div",{className:"flex flex-col justify-center items-center min-h-[85vh] mt-[-40px]",children:(0,s.jsx)("div",{className:"w-full max-w-5xl",children:(0,s.jsxs)(eH.Zp,{className:"shadow-md rounded-lg",children:[(0,s.jsx)(eH.aR,{className:"text-center",children:(0,s.jsx)(eH.ZB,{className:"text-xl font-bold",children:"History Pindahan Bulanan"})}),(0,s.jsx)(eH.Wu,{children:t?(0,s.jsx)("div",{className:"text-center text-gray-500",children:"Loading..."}):l?(0,s.jsx)("div",{className:"text-center text-red-500",children:l}):0===e.length?(0,s.jsx)("div",{className:"text-center text-gray-500",children:"No history records found."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:Object.entries(o).sort((e,a)=>new Date(a[1][0].timestamp).getTime()-new Date(e[1][0].timestamp).getTime()).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold my-4 border-b pb-2",children:a}),(0,s.jsxs)(ek,{className:"w-full",children:[(0,s.jsx)(eS,{children:(0,s.jsxs)(eR,{children:[(0,s.jsx)(eP,{className:"text-left",children:"No."}),(0,s.jsx)(eP,{className:"text-left",children:"ID Barang"}),(0,s.jsx)(eP,{className:"text-right",children:"Quantity"}),(0,s.jsx)(eP,{className:"text-left",children:"Sumber"}),(0,s.jsx)(eP,{className:"text-left",children:"Destinasi"}),(0,s.jsx)(eP,{className:"text-right",children:"Waktu"})]})}),(0,s.jsx)(eC,{children:t.map(e=>(0,s.jsxs)(eR,{children:[(0,s.jsx)(eI,{children:e.pindahan_id}),(0,s.jsx)(eI,{children:e.item_id}),(0,s.jsx)(eI,{className:"text-right",children:e.quantity}),(0,s.jsx)(eI,{children:e.source}),(0,s.jsx)(eI,{children:e.destination}),(0,s.jsx)(eI,{className:"text-right",children:(0,e1.GP)((0,e2.H)(e.timestamp),"dd/MM/yyyy HH:mm:ss")})]},e.pindahan_id))})]})]},a)})})})]})})})},{})};function al(){let[e,a]=(0,r.useState)("Dashboard");return(0,s.jsxs)(M,{children:[(0,s.jsx)(ej,{onSubmenuChange:e=>a(e)}),(0,s.jsxs)(B,{children:[(0,s.jsx)("header",{className:"flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-[[data-collapsible=icon]]/sidebar-wrapper:h-12",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,s.jsx)(L,{className:"-ml-1"}),(0,s.jsx)(b,{orientation:"vertical",className:"mr-2 h-4"}),(0,s.jsx)(eb,{children:(0,s.jsxs)(ey,{children:[(0,s.jsx)(ev,{className:"hidden md:block",children:"Dashboard"}),(0,s.jsx)(ew,{className:"hidden md:block"}),(0,s.jsx)(ev,{children:(0,s.jsx)(eN,{children:e})})]})})]})}),(0,s.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:an[e]||(0,s.jsx)("div",{className:"p-4 text-lg font-semibold text-gray-500",children:"No Content Available"})})]})]})}},3312:(e,a,t)=>{"use strict";t.d(a,{$:()=>o,r:()=>d});var s=t(5155),r=t(2115),n=t(2317),l=t(1027),i=t(1567);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,a)=>{let{className:t,variant:r,size:l,asChild:o=!1,...c}=e,u=o?n.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(d({variant:r,size:l,className:t})),ref:a,...c})});o.displayName="Button"},9749:(e,a,t)=>{"use strict";t.d(a,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>l,aR:()=>i});var s=t(5155),r=t(2115),n=t(1567);let l=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...r})});l.displayName="Card";let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},3900:(e,a,t)=>{"use strict";t.d(a,{p:()=>l});var s=t(5155),r=t(2115),n=t(1567);let l=r.forwardRef((e,a)=>{let{className:t,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...l})});l.displayName="Input"},1567:(e,a,t)=>{"use strict";t.d(a,{cn:()=>n});var s=t(3463),r=t(9795);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,s.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[711,380,247,280,441,517,358],()=>a(4611)),_N_E=e.O()}]);